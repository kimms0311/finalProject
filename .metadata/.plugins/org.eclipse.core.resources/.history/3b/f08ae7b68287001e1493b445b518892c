<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.avo.www.repository.JoongoBoardDAO">
	<insert id="insert">
		insert into product (pro_email, pro_nick_name, pro_title, pro_content, pro_price, pro_category, pro_menu)
		values(#{proEmail}, #{proNickName}, #{proTitle}, #{proContent}, #{proPrice}, #{proCategory}, #{proMenu})
	</insert>
	<!-- <select id="getList" resultType="com.avo.www.domain.ProductBoardVO">
		select * from product
		where pro_category = 'joongo' AND pro_is_del = 'N'
		order by pro_re_at desc limit 0, 4
	</select> -->
	<select id="getListMore" resultType="com.avo.www.domain.ProductBoardVO">
		select * from product
		where pro_category = 'joongo' AND pro_is_del = 'N'
		order by pro_re_at desc limit #{pageStart}, #{qty}
	</select>
	<select id="selectJoongoTotal" resultType="int">
		select count(pro_bno) from product where pro_category = 'joongo' AND pro_is_del = 'N'
	</select>
	<select id="getDetail" resultType="com.avo.www.domain.ProductBoardVO">
		select * from product where pro_bno = #{proBno} AND pro_is_del = 'N'
	</select>
	<update id="update">
		update product set pro_title = #{proTitle}, pro_content = #{proContent}, pro_price = #{proPrice},
		pro_menu = #{proMenu}, pro_mod_at = now()
		where pro_bno = #{proBno}
	</update>
	<update id="delete">
		update product set pro_is_del = 'Y' where pro_bno = #{proBno}
	</update>
	<select id="checkLike" resultType="int">
		select count(li_like_id) from like_item where li_user_id = #{liUserId} AND li_bno = #{liBno}
	</select>
	<insert id="insertLike">
		Insert into like_item (li_user_id, li_bno, li_status)
		value (#{liUserId},#{liBno},#{liStatus})
	</insert>
	<delete id="deleteLike">
		delete from like_item
		where li_user_id = #{liUserId} AND li_bno = #{liBno}
	</delete>
</mapper>